# æœ¬å‘¨å®‰å…¨:çƒ­æ°´æµ´ç¼¸ä¸­çš„ç‰©è”ç½‘ã€åº”ç”¨åŒé‡æ•…éšœå’Œ FreeBSD BadBeacon

> åŸæ–‡:[https://hack aday . com/2022/06/24/this-week-in-security-IOT-in-the-hot-tub-app-double-fail-and-FreeBSD-bad beacon/](https://hackaday.com/2022/06/24/this-week-in-security-iot-in-the-hot-tub-app-double-fail-and-freebsd-badbeacon/)

[Eaton Zveare]è´­ä¹°äº†ä¸€ä¸ªæŒ‰æ‘©æµ´ç¼¸ï¼Œå¹¶èŠ±é’±è´­ä¹°äº† SmartTub æ’ä»¶ï¼Œå®ƒå¯ä»¥å°†æŒ‰æ‘©æµ´ç¼¸è¿æ¥åˆ°äº’è”ç½‘ï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥è¿œç¨‹æ§åˆ¶æ¸©åº¦ã€ç¯å…‰ç­‰ã€‚ä»–æ²¡æœ‰æ„è¯†åˆ°ä»–å°†ä¼šå‘ç°ä¸€åœºå®‰å…¨é—®é¢˜çš„å™©æ¢¦ã€‚å› ä¸ºä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨ IoT ä¸­ï¼ŒS ä»£è¡¨å®‰å…¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ³¨å†Œç”µå­é‚®ä»¶æ¥è‡ª smarttub.ioï¼Œæ‰€ä»¥å¾ˆè‡ªç„¶åœ°åœ¨ web æµè§ˆå™¨ä¸­è°ƒå‡ºè¯¥ URL æ¥æŸ¥çœ‹é‚£é‡Œæœ‰ä»€ä¹ˆã€‚è¯¥é¡µé¢æ˜¾ç¤ºäº†ä¸€ä¸ªç™»å½•æç¤ºï¼Œå› æ­¤[ä¼Šé¡¿]è¾“å…¥äº†ä»–åˆšåˆšç”Ÿæˆçš„å‡­è¯ã€‚â€œæœªç»æˆæƒâ€è¿™å¹¶ä¸å¥‡æ€ªï¼Œä½†å¥‡æ€ªçš„æ˜¯ï¼Œå°±åœ¨æˆæƒæŠ•è¯‰ä¹‹å‰å‡ºç°äº†ä»ªè¡¨ç›˜çš„é—ªå…‰ã€‚è¿™å¯èƒ½æ˜¯æ— æ„ä¸­å‘é€çš„çœŸå®æ•°æ®å—ï¼Ÿä¸€ä¸ªå±å¹•è®°å½•å™¨å›ç­”äº†è¿™ä¸ªé—®é¢˜ï¼Œæ˜¾ç¤ºç¡®å®æœ‰ä¸€ä¸ªè¡¨è£…è½½äº†çœ‹èµ·æ¥æœ‰æ•ˆçš„æ•°æ®ã€‚

ä»”ç»†ç ”ç©¶é¡µé¢çš„ JavaScriptï¼Œä¼šå‘ç°ç™»å½•æµã€‚è¯¥é¡µé¢ä½¿ç”¨ Auth0 æœåŠ¡æ¥å¤„ç†ç™»å½•ï¼Œè¯¥æœåŠ¡å‘å›ä¸€ä¸ªè®¿é—®ä»¤ç‰Œã€‚è¯¥é¡µé¢å°†è®¿é—®ä»¤ç‰Œå‘é€å› Auth0 æœåŠ¡ä»¥è·å¾—ç”¨æˆ·æƒé™ã€‚å¦‚æœç™»å½•çš„ç”¨æˆ·ä¸æ˜¯ç®¡ç†å‘˜ï¼Œå°±ä¼šå‘ç”Ÿé‡å®šå‘ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ä¸€äº›çœŸå®çš„æ•°æ®è¢«åŠ è½½ã€‚ä¼¼ä¹å¯¹æ•°æ®çš„é™åˆ¶éƒ½æ˜¯åœ¨å®¢æˆ·ç«¯å®ç°çš„ï¼Œåç«¯åªéœ€è¦ä¸€ä¸ªæœ‰æ•ˆçš„è®¿é—®ä»¤ç‰Œæ¥è¯·æ±‚æ•°æ®ã€‚å¦‚æœæ¥è‡ª Auth0 çš„å“åº”è¢«ä¿®æ”¹ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Ÿæœ‰å‡ ç§æ–¹æ³•å¯ä»¥å®ç°è¿™ä¸€ç‚¹ï¼Œä½†ä»–é€‰æ‹©äº†ä½¿ç”¨ [Fiddler](https://www.telerik.com/fiddler/fiddler-classic) ã€‚é‡å†™å“åº”ï¼Œä»¥ä¾¿å‰ç«¯è®¤ä¸ºæ‚¨æ˜¯ç®¡ç†å‘˜ï¼Œå¹¶ä¸”æ‚¨å·²ç»è¿›å…¥ã€‚

è¿™ç§æ–¹æ³•ä¼¼ä¹è·å¾—äº†å¯¹æ‰€æœ‰ SmartTub ç®¡ç†æ§ä»¶çš„ç®¡ç†è®¿é—®æƒé™ï¼Œå°½ç®¡[Eaton]æ²¡æœ‰å°è¯•å®é™…è¿›è¡Œæ›´æ”¹ï¼Œä»¥æŸ¥çœ‹ä»–æ˜¯å¦ä¹Ÿæœ‰å†™è®¿é—®æƒé™ã€‚è¿™è¶³ä»¥è¯æ˜è¿™ä¸€ç¼ºé™·ï¼Œåšå‡ºæ”¹å˜å°†æ˜¯åœ¨ç©å¼„é‚£æ¡åŒºåˆ†ç ”ç©¶å’Œè®¡ç®—æœºçŠ¯ç½ªçš„å±é™©ç•Œé™ã€‚å½“ä»–è¯•å›¾æ­éœ²æ¼æ´æ—¶ï¼ŒçœŸæ­£çš„é—®é¢˜å¼€å§‹äº†ã€‚SmartTub æ²¡æœ‰å®‰å…¨è”ç³»äººï¼Œä½†ç»™ä»–ä»¬çš„æ”¯æŒç”µå­é‚®ä»¶åœ°å€çš„ä¸€å°ç”µå­é‚®ä»¶ç¡®å®å¾—åˆ°äº†è¯¢é—®ç»†èŠ‚çš„å›å¤ã€‚åœ¨ç»†èŠ‚è¢«æä¾›åï¼Œå®Œå…¨çš„æ— çº¿ç”µé™é»˜ã€‚æ¼æ€’ä¹‹ä¸‹ï¼Œä»–æœ€ç»ˆæ±‚åŠ©äº Auth0ï¼Œè¯·æ±‚ä»–ä»¬å¹²é¢„ã€‚ä»–ä»¬çš„è§£å†³æ–¹æ¡ˆæ˜¯æ‹”æ‰ä¸¤ä¸ª URL ç«¯ç‚¹ä¹‹ä¸€çš„æ’å¤´ã€‚æœ€åï¼Œåœ¨å°è¯•å‘ŠçŸ¥æŒ‰æ‘©æµ´ç¼¸å’Œæ™ºèƒ½æµ´ç¼¸ä¸¥é‡çš„å®‰å…¨é—®é¢˜å…­ä¸ªæœˆåï¼Œä¸¤ä¸ªç®¡ç†é—¨æˆ·éƒ½å®‰å…¨äº†ã€‚

## æ…¢è·‘è¿œç¦»ä¿å®‰

è¿™ä¸ªå…³äº Strava è¿åŠ¨ app çš„æ•…äº‹æœ‰ä¸¤å±‚å¤±è´¥[ã€‚Strava è®©ç”¨æˆ·è¿½è¸ªä»–ä»¬çš„è·‘æ­¥ã€éª‘è‡ªè¡Œè½¦å’Œå¾’æ­¥æ—…è¡Œã€‚å‡ºäºéšç§è€ƒè™‘ï¼Œæœ‰ä¸€ä¸ªéšè—ç”¨æˆ·ä½ç½®çš„é€‰é¡¹ï¼Œä½†äº‹å®è¯æ˜ï¼Œå·§å¦™åœ°ä½¿ç”¨çƒ­å›¾å’Œåˆ†æ®µåŠŸèƒ½å¯ä»¥å‡»è´¥è¿™ç§ä¿æŠ¤ã€‚ä¸Šä¼ è™šå‡ç”¨æˆ·çš„è·‘æ­¥è®°å½•ï¼Œè¯¥åº”ç”¨ç¨‹åºä¼šå°†ä½ çš„è·‘æ­¥è®°å½•ä¸è¯¥åœ°åŒºçš„å…¶ä»–ç”¨æˆ·(éšè—æˆ–ä¸éšè—)è¿›è¡Œæœ‰ç›Šçš„æ¯”è¾ƒã€‚è¿™ä»½ç”¨æˆ·åå•å°†å…è®¸ä¸€åä¸“é—¨çš„è°ƒæŸ¥äººå‘˜ç»˜åˆ¶å‡ºä¸ªäººåœ¨å“ªé‡Œåº¦è¿‡äº†ä»–ä»¬çš„æ—¶é—´ã€‚è¿™é¡¹ç ”ç©¶çš„é‡ç‚¹æ˜¯è·Ÿè¸ªå†›äº‹æˆå‘˜ï¼Œæ­ç¤ºäº†ä¸€äº›å¯é¢„è§çš„æœ‰è¶£çš„ç»“æœã€‚](https://www.haaretz.com/israel-news/2022-06-21/ty-article/.premium/mossad-hq-and-army-sites-exercise-app-reveals-israeli-bases-officials/00000181-82c3-ddb4-a3ab-d2df702c0000)

è¿™æ˜¯ç¬¬äºŒä¸ªå®‰å…¨æ¼æ´ã€‚ä»¥è‰²åˆ—å†›æ–¹å…è®¸ä»–ä»¬çš„å£«å…µï¼Œç”šè‡³æ˜¯ç‰¹ç§éƒ¨é˜Ÿæˆå‘˜ï¼Œä½¿ç”¨ä¸€ä¸ªå¯ä»¥é€šè¿‡ GPS å®šä½ç»™å®¶é‡Œæ‰“ç”µè¯çš„åº”ç”¨ç¨‹åºã€‚å³ä½¿åº”ç”¨ç¨‹åºä¸­æ²¡æœ‰å®¹æ˜“è¢«åˆ©ç”¨çš„å®‰å…¨æ¼æ´ï¼Œè¿™ä»ç„¶æ˜¯ä¸€ä¸ªå¯æ€•çš„æ“ä½œå®‰å…¨é—®é¢˜ã€‚è¿™é¡¹ç ”ç©¶è¢«é€éœ²ç»™äº† Stravaï¼Œä»–åˆ é™¤äº†ç ”ç©¶ä¸­ä½¿ç”¨çš„å‡ç”¨æˆ·ã€‚ç›®å‰è¿˜ä¸æ¸…æ¥šåº”ç”¨ç¨‹åºå¼€å‘è€…æ˜¯å¦çœŸçš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ä»¥è‰²åˆ—å†›æ–¹è¡¨ç¤ºï¼Œä»–ä»¬æ­£åœ¨æ¨å‡ºç¨‹åºï¼Œè¯•å›¾é˜²æ­¢è¿™ç§æ•°æ®æ³„æ¼åœ¨æœªæ¥ã€‚

## OpenSSL AVX512 é”™è¯¯

[OpenSSL 3 . 0 . 4 ä¸­æœ‰ä¸€ä¸ª bugï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªç‰¹åˆ«è®¨åŒçš„ bug](https://github.com/openssl/openssl/issues/18625)ï¼Œä½†å®ƒåªå‘ç”Ÿåœ¨å¸¦æœ‰ AVX512 æ‰©å±•çš„ CPU ä¸Šã€‚è¯¥é—®é¢˜åœ¨`ossl_rsaz_mod_exp_avx512_x2()`ä¸­è¢«è§¦å‘ï¼Œå®ƒå‘`bn_reduce_once_in_place()`å‘å‡ºä¸€ä¸ªå‘¼å«ã€‚è¯¥è°ƒç”¨åŒ…å«å€¼`factor_size`ï¼Œå®ƒåº”è¯¥æ˜¯è¦å¤„ç†çš„å­—æ•°ï¼Œä½†æ—§ä»£ç å‘é€çš„æ˜¯ä½é•¿ã€‚è¿™åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¼šå¯¼è‡´å †ç¼“å†²åŒºæº¢å‡ºã€‚ä»¤äººæ¯›éª¨æ‚šç„¶çš„æ˜¯ï¼Œå®ƒå¯ä»¥ç”± TLS æ¡æ‰‹å’Œå…¶ä»–æ½œåœ¨çš„æ”»å‡»è€…æ§åˆ¶çš„è¾“å…¥æ¥è§¦å‘ã€‚å”¯ä¸€ä¸è¶³ä»¥ç§°ä¹‹ä¸º 10.0 ç‰ˆ CVSSÂ·CVE çš„æ˜¯å‰¥å‰Šçš„çœŸå®è¡¨ç°ã€‚äº‹å®ä¸Šï¼Œæ¼”ç¤ºå´©æºƒæ˜¯å¾ˆå®¹æ˜“çš„ã€‚ä¸€ä¸ª 3.0.5 ç‰ˆæœ¬å°†å¾ˆå¿«å‘å¸ƒï¼Œ[åŒ…å«ä¿®å¤](https://github.com/openssl/openssl/pull/18626)ï¼Œä½†æ˜¯è¿˜ä¸æ¸…æ¥šä»€ä¹ˆæ—¶å€™ä¼šå‘å¸ƒã€‚å¤§å¤šæ•°å‘è¡Œç‰ˆä¼¼ä¹éƒ½åœ¨æ¨è¿Ÿå‘å¸ƒ 3.0.4 ç‰ˆæœ¬ï¼Œç­‰å¾…è¿™ä¸ªæ½œåœ¨ä¸¥é‡é—®é¢˜çš„ä¿®å¤ã€‚

## FreeBSD BadBeacon

æˆ‘å†’æ˜§åœ°ä¸ºè¿™ä¸ªæ¼æ´å–äº†ä¸€ä¸ªæ˜æ˜¾çš„åå­—ï¼ŒBadBeaconã€‚ç”±[m00nbsd]ï¼Œ[å‘ç°ï¼Œè¿™æ˜¯ä¸€ä¸ªç®€å•çš„å †æº¢å‡º](https://www.zerodayinitiative.com/blog/2022/6/15/cve-2022-23088-exploiting-a-heap-overflow-in-the-freebsd-wi-fi-stack)ï¼Œä½†æ˜¯è¿™ä¸ªè®©æ”»å‡»è€…æ§åˆ¶åˆ°åº•è¦å†™å¤šå°‘å­—èŠ‚ï¼Œä»¥åŠé‚£äº›å­—èŠ‚çš„å†…å®¹ã€‚æ˜¯ FreeBSD å¤„ç† WiFi ä¿¡æ ‡å¸§çš„é—®é¢˜ã€‚å¸§æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª WiFi æ•°æ®åŒ…ï¼Œä¿¡æ ‡æ˜¯å®£å¸ƒ WiFi ç½‘ç»œç»†èŠ‚çš„æ•°æ®åŒ…ã€‚ä¿¡æ ‡ä¸­æœ‰è®¸å¤šå¯èƒ½çš„å­—æ®µï¼Œå…¶ä¸­è®¸å¤šå­—æ®µéœ€è¦ä¸“ç”¨çš„ä»£ç è·¯å¾„æ¥å¤„ç†ã€‚

ä¸€ä¸ªè¿™æ ·çš„å­—æ®µæ˜¯ç½‘æ ¼ ID å€¼ã€‚å®ƒåŒ…å«é•¿åº¦å’Œå€¼ï¼ŒFreeBSD å†…æ ¸å°†è¿™äº›ä½œä¸ºå¯¹å›ºå®šå¤§å°ç¼“å†²åŒºçš„`memcpy()`è°ƒç”¨çš„è¾“å…¥ã€‚æ•°æ®åœ¨åŒ…å«ç»“æ„ä¸­çš„å¸ƒå±€æ–¹å¼ï¼Œæº¢å‡ºè¯¥ç¼“å†²åŒºä¹Ÿä¼šè¦†ç›–å¦ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œè¯¥æ•°æ®ç»“æ„ä»¥æ•°æ®æŒ‡é’ˆå’Œé•¿åº¦å€¼ç»“æŸã€‚è¯¥æ•°æ®æŒ‡é’ˆç„¶åè¢«ç”¨ä½œå¦ä¸€ä¸ª`memcpy()`è°ƒç”¨çš„ç›®æ ‡ä½ç½®ã€‚è¿™æ˜¯ä¸€ä¸ªâ€œå†™ä»€ä¹ˆåœ¨å“ªé‡Œâ€çš„åŸè¯­ï¼Œä¹Ÿå°±æ˜¯ä¸€ç§åœ¨ä»»ä½•åœ°æ–¹å†™å‡ ä¹ä»»æ„æ•°æ®çš„ç®€å•æŠ€æœ¯ã€‚

ä»–ä»¬ä¸‹ä¸€æ­¥é€‰æ‹©æ–¹å‘æ˜¯åœ¨æœªä½¿ç”¨çš„å†…å­˜æ®µä¸­è®¾ç½®ä¸€ä¸ªå†…æ ¸åé—¨ï¼Œç„¶åå°†è¯¥ä»£ç ä¸å¸§å¤„ç†ä»£ç æŒ‚é’©ã€‚å®ƒä½œä¸ºä¸€ä¸ªå•å‘å†…æ ¸åé—¨ã€‚ä»–ä»¬çš„æ¦‚å¿µéªŒè¯ä»£ç åªæ˜¯å°†ä¸€æ¡æ¶ˆæ¯æ‰“å°åˆ°å†…æ ¸æ—¥å¿—ä¸­ï¼Œä½†æ˜¯å¾ˆå®¹æ˜“è¢«æ­¦å™¨åŒ–ã€‚FreeBSD åœ¨ 4 æœˆä»½ä¿®è¡¥äº†è¿™ä¸ªæ¼æ´ã€‚ç›®å‰è¿˜ä¸æ¸…æ¥š pfSense ä½•æ—¶æˆ–æ˜¯å¦å‘å¸ƒäº†ä¿®å¤æ›´æ–°ï¼Œå°½ç®¡å®ƒå¾ˆå¯èƒ½å·²ç»å‘ç”Ÿäº†ï¼Œåªæ˜¯æ²¡æœ‰å…¬å¸ƒ CVE çš„ä¿®å¤ï¼ŒCVE-2022-23088ã€‚

## linux syslogd rootkit

æœ‰ä¸€ä¸ªç‰¹åˆ«éšç§˜çš„å†…æ ¸ rootkitï¼Œ [Syslogkï¼Œæ½œä¼åœ¨é‡å¤–](https://decoded.avast.io/davidalvarez/linux-threat-hunting-syslogk-a-kernel-rootkit-found-under-development-in-the-wild/)ã€‚Avast çš„ç ”ç©¶äººå‘˜æ£€æŸ¥çš„ rootkit ç‰ˆæœ¬ä¼¼ä¹æ˜¯é’ˆå¯¹ Centos 6 å’Œç±»ä¼¼çš„ era å†…æ ¸ã€‚å®ƒä¸é—ä½™åŠ›åœ°æ¶ˆå¤±ï¼Œéšè—å®ƒçš„æ–‡ä»¶ï¼Œç”šè‡³ä»åŠ è½½çš„å†…æ ¸æ¨¡å—åˆ—è¡¨ä¸­åˆ é™¤è‡ªå·±ã€‚æœ‰ä¸€ä¸ªéšè—çš„åŠŸèƒ½ï¼Œå†™ 1 åˆ°`/proc/syslogk`ï¼Œå…³é—­éšèº«åŠŸèƒ½ã€‚å› æ­¤ï¼Œå¦‚æœæ‚¨æœ‰ä¸€å°å¯èƒ½å·²ç»å—æŸçš„æ—§æœåŠ¡å™¨ï¼Œè¯·å°è¯•æŸ¥çœ‹è¯¥ä½ç½®ï¼Œçœ‹çœ‹æ˜¯å¦ä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µã€‚

## é€šè¿‡ DCP æ„ŸæŸ“ iOS

å¦‚æœä¸èƒ½ç ´è§£ä¸»å¤„ç†å™¨çš„å®‰å…¨ï¼Œ[ä¹Ÿè®¸å¯ä»¥é€šè¿‡åå¤„ç†å™¨åé—¨](https://googleprojectzero.blogspot.com/2022/06/curious-case-carrier-app.html)ï¼Ÿè¿™æ­£æ˜¯ä¸€ä¸ªå‡å†’çš„ Vodaphone åº”ç”¨ç¨‹åºåœ¨ iPhone ä¸Šåšçš„äº‹æƒ…ã€‚æ˜¾ç¤ºåå¤„ç†å™¨(DCP)æ˜¯ M1 SoC çš„ä¸€ä¸ªæ–°éƒ¨åˆ†ï¼Œè¿™ä¸ªæ¶æ„åº”ç”¨ç¨‹åºåœ¨å®ƒçš„ä¸€ä¸ªæ†ç»‘åˆ©ç”¨ä¸­ä½¿ç”¨äº†å®ƒã€‚è¿™ç¯‡æ–‡ç« å¾ˆè¯¦ç»†ï¼Œä¹Ÿå¾ˆæ·±å…¥ï¼Œå°±åƒ Google Project Zero çš„æ–‡ç« ä¸€æ ·ã€‚æˆ‘ä¸æƒ³æ·±ç©¶ç»†èŠ‚ï¼Œæˆ‘åªæƒ³å‘Šè¯‰ä½ [Hector Martin]çš„æƒ³æ³•ï¼Œä»–å¯èƒ½æ˜¯å°‘æ•°è‹¹æœå·¥ç¨‹å¸ˆä¹‹å¤– M1 èŠ¯ç‰‡æ–¹é¢æœ€é‡è¦çš„ä¸“å®¶:

> Haï¼Œä¸€ä¸ªåŸºäº DCP çš„æ¼æ´ï¼Œä»ç”¨æˆ·ç©ºé—´è·³åˆ° DCPï¼Œç„¶åå›åˆ°å†…æ ¸ã€‚å¯çˆ±ã€‚
> 
> è¿˜è®°å¾—æˆ‘è¯´çš„ M1 åå¤„ç†å™¨ä¸èƒ½ pwn ç³»ç»Ÿå—ï¼Ÿè¿™æ˜¯å‡è®¾ä½ çš„é©±åŠ¨ä¸åƒè‹¹æœé‚£æ ·å®ç°â€œsudo pwn ç³»ç»Ÿâ€ğŸ˜…ã€‚[https://t.co/3uNVBVrD4F](https://t.co/3uNVBVrD4F)
> 
> â€”èµ«å…‹æ‰˜Â·é©¬ä¸(@ marcan 42)[2022 å¹´ 6 æœˆ 24 æ—¥](https://twitter.com/marcan42/status/1540125015731224576?ref_src=twsrc%5Etfw)